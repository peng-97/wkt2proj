{"version":3,"file":"parser-gml.min.js","sources":["../src/index.js"],"sourcesContent":["\r\nlet wkt='GEOGCS[\"GCS_China_Geodetic_Coordinate_System_2000\",\\n' +\r\n    '    DATUM[\"D_China_2000\",\\n' +\r\n    '        SPHEROID[\"CGCS2000\",6378137.0,298.257222101]],\\n' +\r\n    '    PRIMEM[\"Greenwich\",0.0],\\n' +\r\n    '    UNIT[\"Degree\",0.0174532925199433]]'\r\n// 将wkt转换为json\r\nfunction  wkt_to_json(wkt){\r\n     if (!wkt) return;\r\n      let count=wkt.length;\r\n      let parser_str=\"\";\r\n     for (let i = 0; i < wkt.length; i++) {\r\n            let char=wkt[i];\r\n            if (char ==\"[\" ){\r\n                  char=\":[{\"\r\n            }\r\n            else if (char==\"]\"){\r\n                 char=\"}]\"\r\n            }else  if (char ==\"\\,\"){\r\n                 char=\"},{\"\r\n            }\r\n            parser_str+=char;\r\n     }\r\n     let left_list=[];\r\n     let remove_list=[];\r\n     for (let i = 0; i < parser_str.length; i++) {\r\n           let char=parser_str[i];\r\n           if (char == \"{\"){\r\n                left_list.push(i)\r\n           }else  if (char==\"}\" && left_list.length>0){\r\n                 let substr=parser_str.substring(left_list[left_list.length-1],i);\r\n                 if (!substr.includes(\":\")){\r\n                     remove_list=remove_list.concat([left_list[left_list.length-1],i])\r\n                     left_list=[];\r\n                 }\r\n           }\r\n     }\r\n     let result_str = \"\";\r\n     for (let i = 0; i < parser_str.length; i++) {\r\n          if(!remove_list.includes(i)){\r\n               result_str+=parser_str[i]\r\n          }\r\n     }\r\n     console.dir(eval(result_str))\r\n}\r\n\r\nconst  PKW_PROJCS =\"PROJCS\";   //投影坐标系\r\nconst  PKW_GEOGCS=\"GEOGCS\";    //地理坐标系\r\nconst  PKW_DATUM=\"DATUM\";    //大地基准面\r\nconst  PKW_SPHEROID =\"SPHEROID\"; //椭球体定义\r\nconst  PKW_PRIMEM=\"PRIMEM\"; //本初子午线\r\nconst  PKW_UNIT = \"UNIT\"; //单位\r\nconst  PKW_PROJECTION =\"PROJECTION\"; //投影类型\r\nconst  PKW_PARAMETER = \"PARAMETER\";  //投影参数\r\nconst  PKW_AUTHORITY = \"AUTHORITY\";//权威定义\r\nclass Cs{\r\n    constructor(wkt_json) {\r\n        this.wkt_json=wkt_json\r\n        this.init()\r\n    }\r\n    get_geogcs(value){\r\n        let values=Object.values(value)[0]\r\n        return new GeogCs(values[0],values[1],values[2])\r\n    }\r\n    get_proj(value){\r\n        let values=Object.values(value)[0]\r\n        let  prj_name=values[0];\r\n        let proj_parma=[];\r\n        let geocs=this.get_geogcs(values[1])\r\n        let unit=\"\";\r\n        let proj=\"\"\r\n        for (let i=2;i<values.length;i++){\r\n            if (values[i] instanceof  Object){\r\n                let key=Object.keys(values[i])[0].toUpperCase();\r\n                switch (key){\r\n                    case PKW_PARAMETER:\r\n                        proj_parma.push(new ProjParameter(values[i]))\r\n                        break\r\n                    case PKW_UNIT:\r\n                        unit=new Uint(values[i]);\r\n                        break\r\n                    case PKW_PROJECTION:\r\n                        proj=new Projection(values[i]);\r\n                        break;\r\n                }\r\n\r\n            }\r\n        }\r\n        return new ProjCs(prj_name,geocs,proj,proj_parma,unit)\r\n    }\r\n    init(){\r\n        this.type=Object.keys(this.wkt_json)[0].toUpperCase();\r\n        if (Object.keys(this.wkt_json)[0].toUpperCase()===PKW_PROJCS){\r\n            this.cs=this.get_proj(this.wkt_json)\r\n        }else{\r\n            this.cs=this.get_geogcs(this.wkt_json)\r\n        }\r\n\r\n    }\r\n    to_proj4(){\r\n        return this.cs.to_proj4()+\" +no_defs +type=crs\"\r\n    }\r\n}\r\nclass Datum{\r\n    datum_list=[\r\n        {\r\n            proj4: \"WGS84\",\r\n            ogc_wkt: \"WGS_1984\",\r\n            esri_wkt : \"D_WGS_1984\",\r\n        }]\r\n    constructor(datum) {\r\n        let values=Object.values(datum)[0]\r\n        this.name=values[0];\r\n        this.ellipsoid=new Ellipsoids(values[1])\r\n    }\r\n    to_proj4(){\r\n        // let str=''\r\n        //      if (this.datum_list.find(value => value.esri_wk))\r\n        return this.ellipsoid.to_proj4()\r\n    }\r\n\r\n}\r\nclass Direction{\r\n    dir_list=[\r\n        {\"EAST\":\"e\"},\r\n        {\"South\":\"s\"},\r\n        {\"WEST\":\"w\"},\r\n        {\"NORTH\":\"n\"},\r\n        {\"UP\":\"u\"},\r\n        {\"Down\":\"d\"}]\r\n}\r\nclass Ellipsoids{\r\n    ellipsoids_list=[\r\n        {\r\n            name:\"GRS80\",\r\n            data:[6378137.0,298.257222101],\r\n        },\r\n        {\r\n            name:\"airy\",\r\n            data:[6377563.396,6356256.910],\r\n        },\r\n        {\r\n            name:\"bessel\",\r\n            data:[6377397.155,299.1528128]\r\n        },\r\n        {\r\n            name:\"clrk66\",\r\n            data:[6378206.4,6356583.8]\r\n        },\r\n        {\r\n            name:\"intl\",\r\n            data:[6378388.0,297.0]\r\n        },\r\n        {\r\n            name:\"WGS60\",\r\n            data:[6378165.0,298.3]\r\n        },\r\n        {\r\n            name:\"WGS66\",\r\n            data:[6378145.0,298.25]\r\n        },\r\n        {\r\n            name:\"WGS72\",\r\n            data:[6378135.0,298.26]\r\n        },\r\n        {\r\n            name:\"WGS84\",\r\n            data:[6378137.0,298.257223563]\r\n        },\r\n        {\r\n            name:\"sphere\",\r\n            data:[6370997.0,6370997.0]\r\n        }\r\n    ]\r\n    constructor(ellip) {\r\n        let values=Object.values(ellip)[0]\r\n        this.name=values[0]\r\n        this.a=values[1]\r\n        this.rf=values[2]\r\n    }\r\n    to_proj4(){\r\n        if(this.ellipsoids_list.find(value => value.name.toLowerCase()===this.name.toLowerCase())){\r\n            return  \" +ellps=\"+this.name\r\n        }\r\n        let ell=this.ellipsoids_list.find(value => (value.data[0]==this.a) && value.data[1]==this.rf);\r\n        if (ell){\r\n            return \" +ellps=\"+ell.name\r\n        }else{\r\n            return  \" +a=\"+this.a+\" rf=\"+this.rf\r\n        }\r\n    }\r\n}\r\nclass GeogCs{\r\n    constructor(name, datum, prime_mer, angunit, twin_ax=null) {\r\n        this.name=name;\r\n        this.datum=new Datum(datum);\r\n        this.prime_mer=new Prime(prime_mer);\r\n        this.angunit=angunit;\r\n        this.twin_ax=twin_ax;\r\n    }\r\n    _get_geo_proj4(){\r\n        return this.datum.to_proj4()+this.prime_mer.to_proj4()\r\n    }\r\n    to_proj4(isPro=false){\r\n        let str_proj=this._get_geo_proj4()\r\n        if (isPro){\r\n            return str_proj\r\n        }else {\r\n            return  \" +proj=longlat\"+str_proj\r\n        }\r\n\r\n    }\r\n}\r\nclass ProjCs{\r\n    constructor(name,geogcs,proj,params,unit) {\r\n        this.name=name;\r\n        this.geogcs=geogcs;\r\n        this.proj=proj;\r\n        this.params=params\r\n        this.unit=unit;\r\n    }\r\n    to_proj4(){\r\n        let params=this.params.map(value => {\r\n            return value.to_proj4()\r\n        }).join(\" \")\r\n        return \" +proj=\"+this.proj.to_proj4()+this.geogcs.to_proj4(true)+params+this.unit.to_proj4()\r\n    }\r\n}\r\nclass ProjParameter {\r\n    proj_param_list=[\r\n        { \"False_Easting\":          \"x_0\"   },\r\n        { \"False_Northing\" :        \"y_0\"   },\r\n        { \"Central_Meridian\":       \"lon_0\"  },\r\n        { \"Latitude_Of_Origin\":     \"lat_0\"  },\r\n        { \"Latitude_Of_Center\" :    \"lat_0\"  },\r\n        { \"Standard_Parallel_1\" :   \"lat_ts\" },\r\n        { \"Standard_Parallel_2\" :   \"lat_2\"  },\r\n        { \"Latitude_Of_1st_Point\":  \"lat_1\"  },\r\n        { \"Latitude_Of_2nd_Point\":  \"lat_2\"  },\r\n        { \"Longitude_Of_1st_Point\" : \"lon_1\"  },\r\n        { \"Longitude_Of_2nd_Point\" : \"lon_2\"  },\r\n        { \"Scale_Factor\" :           \"k\"},\r\n        { \"Azimuth\" :                \"alpha\"  },\r\n        { \"Longitude_Of_Center\" :    \"lonc\"}\r\n    ];\r\n    constructor(param) {\r\n        let values=Object.values(param)[0]\r\n        this.param_name=values[0];\r\n        this.param_value=values[1];\r\n    };\r\n    _get_proj_param(){\r\n        for (let i = 0; i < this.proj_param_list.length; i++) {\r\n            let obj=this.proj_param_list[i];\r\n            if (Object.keys(obj)[0].toLowerCase()===this.param_name.toLowerCase()){\r\n                return obj[Object.keys(obj)[0]]\r\n            }\r\n        }\r\n        return  \"\"\r\n    };\r\n    to_proj4(){\r\n        let para_value=this._get_proj_param()\r\n        return \" +\"+para_value+\"=\"+this.param_value;\r\n    }\r\n}\r\nclass Projection {\r\n    proj_aliases_list=[\r\n        {\"Aitoff\":                              \"aitoff\"  },\r\n        {\"Albers\":                              \"aea\"     },\r\n        {\"Azimuthal_Equidistant\":               \"aeqd\"    },\r\n        {\"Bonne\":                               \"bonne\"   },\r\n        {\"Cassini\":                             \"cass\"    },\r\n        {\"Chamberlin_Trimetric\":                \"chamb\"   },\r\n        {\"Craster_Parabolic\":                   \"crast\"   },\r\n        {\"Cylindrical_Equal_Area\":              \"cea\"     },\r\n        {\"Eckert_I\":                            \"eck1\"    },\r\n        {\"Eckert_II\":                           \"eck2\"    },\r\n        {\"Eckert_III\":                          \"eck3\"    },\r\n        {\"Eckert_IV\":                           \"eck4\"    },\r\n        {\"Eckert_V\":                            \"eck5\"    },\r\n        {\"Eckert_VI\":                           \"eck6\"    },\r\n        {\"Equidistant_Conic\":                   \"eqdc\"    },\r\n        {\"Equidistant_Cylindrical\":             \"eqc\"     },\r\n        {\"Plate_Carree\":                        \"eqc\"     },\r\n        {\"Gall_Stereographic\":                  \"gall\"    },\r\n        {\"Gauss_Kruger\":                        \"tmerc\"   },\r\n        {\"Gnomonic\":                            \"gnom\"    },\r\n        {\"Goode_Homolosine\":                    \"goode\"   },\r\n        {\"Hammer_Aitoff\":                       \"hammer\"  },\r\n        {\"Hotine_Oblique_Mercator_Azimuth_Center\" :\"merc\"    },\r\n        {\"Krovak\":                              \"krovak\"  },\r\n        {\"Lambert_Azimuthal_Equal_Area\":        \"laea\"    },\r\n        {\"Lambert_Conformal_Conic\":             \"lcc\"     },\r\n        {\"Loximuthal\":                          \"loxim\"   },\r\n        {\"Mercator\":                            \"merc\"    },\r\n        {\"Miller_Cylindrical\":                  \"mill\"    },\r\n        {\"Mollweide\":                           \"moll\"    },\r\n        {\"New_Zealand_Map_Grid\":                \"nzmg\"    },\r\n        {\"Orthographic\":                        \"ortho\"   },\r\n        {\"Perspectice\":                         \"pconic\"  },\r\n        {\"Polyconic\":                           \"poly\"    },\r\n        {\"Quartic_Authalic\":                    \"qua_aut\" },\r\n        {\"Robinson\":                            \"robin\"   },\r\n        {\"Sinusoidal\":                          \"sinu\"    },\r\n        {\"Stereographic\":                       \"stere\"   },\r\n        {\"Stereographic_South_Pole\":            \"stere\"   },\r\n        {\"Double_Stereographic\":                \"sterea\"  },\r\n        {\"Transverse_Mercator\":                 \"tmerc\"   },\r\n        {\"Two_Point_Equidistant\":               \"tpeqd\"   },\r\n        {\"Universal_Polar_Stereographic\":       \"ups\"     },\r\n        {\"Universal_Transverse_Mercator\":       \"utm\"     },\r\n        {\"Van_der_Grinten_I\":                   \"vandg\"   },\r\n        {\"Winkel_I\":                            \"wink1\"   },\r\n        {\"Winkel_II\":                           \"wink2\"   },\r\n        {\"Winkel_Tripel\":                       \"wintri\"  },\r\n        {\"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\":  \"merc\"    },\r\n        {\"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\": \"tpeqd\"   },\r\n        {\"Mercator_Auxiliary_Sphere\":           \"merc\"    },\r\n        {\"Stereographic_North_Pole\":            \"stere\"   },\r\n        {\"Transverse_Mercator_Complex\":         \"tmerc\"   },\r\n    ];\r\n    constructor(proj) {\r\n        this.proj_name=Object.values(proj)[0][0]\r\n    };\r\n    _get_proj_name(){\r\n        for (let i = 0; i < this.proj_aliases_list.length; i++) {\r\n            let obj=this.proj_aliases_list[i];\r\n            if (Object.keys(obj)[0].toLowerCase()===this.proj_name.toLowerCase()){\r\n                return obj[Object.keys(obj)[0]]\r\n            }\r\n        }\r\n        return  \"\"\r\n    };\r\n    to_proj4(){\r\n        return this._get_proj_name()\r\n    }\r\n}\r\nclass Uint{\r\n    constructor(unit) {\r\n        this.unit_name=Object.values(unit)[0][0]\r\n        // this.unit_value=Object.values(unit)[1]\r\n    };\r\n    unit_list=[\r\n        { \"Kilometer\" :      \"km\"    },\r\n        { \"Meter\" :          \"m\"     },\r\n        { \"Decimeter\" :      \"dm\"    },\r\n        { \"Centimeter\" :     \"cm\"    },\r\n        { \"Millimeter\" :     \"mm\"    },\r\n        { \"Foot_US\" :        \"us-ft\" },\r\n        { \"Foot_Gold_Coast\" :\"us-ft\" },\r\n        { \"Degree\" :         \"\"      },\r\n    ];\r\n    _get_unit(){\r\n        for (let i = 0; i < this.unit_list.length; i++) {\r\n            let obj=this.unit_list[i];\r\n            if (Object.keys(obj)[0].toLowerCase()===this.unit_name.toLowerCase()){\r\n                return obj[Object.keys(obj)[0]]\r\n            }\r\n        }\r\n        return \"Unknown\"\r\n    };\r\n    to_proj4(){\r\n        let unit_value=this._get_unit();\r\n        return \" +units=\"+unit_value;\r\n    }\r\n}\r\nclass Prime{\r\n    prime_list=[\"greenwich\", \"lisbon\", \"paris\", \"bogota\", \"madrid\",\"rome\",\"bern\",\"jakarta\",\"ferro\",\"brussels\",\"stockholm\",\"athens\",\"oslo\"]\r\n    constructor(prime) {\r\n        let values=Object.values(prime)[0]\r\n        this.prime_name=values[0];\r\n        this.prime_value=values[1]\r\n    };\r\n    to_proj4(){\r\n        let  str=\" +pm=\"\r\n        if (this.prime_list.find(value => value.toLowerCase()===this.prime_name.toLowerCase())){\r\n            str+=this.prime_name;\r\n        }else{\r\n            str+=this.prime_value\r\n        }\r\n        return str;\r\n    }\r\n}\r\n\r\n\r\n//获取wkt类型\r\nfunction get_wkt_type(data){\r\n     let key=data.keys[0];\r\n     //\r\n      let geo_gcs_content=null\r\n     if (key.toUpperCase()==\"PROJCS\")//投影坐标系\r\n     {\r\n         geo_gcs_content=data[key][1][data[key][1].keys[0]]\r\n     }else{\r\n         geo_gcs_content=data[key]\r\n     }\r\n     let datum_content=geo_gcs_content[geo_gcs_content.keys[0]]\r\n    let datum_name = datum_content[0].toUpperCase().trim('\"')\r\n    if (datum_name.startsWith(\"D_\"))\r\n        return  \"esri\"\r\n    else {\r\n        return  \"ogc\"\r\n    }\r\n}\r\n\r\n\r\n//wkt 转换为json格式\r\nfunction bracket_to_json(wkt,index=0){\r\n    let bracket_list=[];\r\n    let  key='';\r\n    for (let i = index; i < wkt.length; i++) {\r\n        let char=wkt[i];\r\n        if (char==\"[\"){\r\n            let obj={};\r\n            let result=bracket_to_json(wkt,i+1);\r\n            obj[key]=result[0];\r\n            bracket_list.push(obj);\r\n            i = result[1];\r\n            key='';\r\n        }else if (char == \"\\,\"){\r\n            if (key) {\r\n                bracket_list.push(key);\r\n                key = '';\r\n            }\r\n        }else if (char == \"]\"){\r\n            if (key){\r\n                bracket_list.push(key);\r\n            }\r\n            return [bracket_list,i];\r\n        }else{\r\n            if (char!=\"\\\"\" &&  char!=\"\\'\" && char!=' ' && char!=\"\\n\"){\r\n                key+=char\r\n            }\r\n        }\r\n    }\r\n    return  bracket_list[0];\r\n}\r\n\r\n\r\n\r\nfunction  to_proj4(str){\r\n    let wkt_json=bracket_to_json(wkt)\r\n    let cs=new Cs(wkt_json)\r\n    return cs.to_proj4()\r\n}\r\nexport  default  to_proj4\r\n"],"names":["Cs","constructor","wkt_json","this","init","get_geogcs","value","values","Object","GeogCs","get_proj","prj_name","proj_parma","geocs","unit","proj","i","length","keys","toUpperCase","push","ProjParameter","Uint","Projection","ProjCs","type","cs","to_proj4","Datum","datum_list","proj4","ogc_wkt","esri_wkt","datum","name","ellipsoid","Ellipsoids","ellipsoids_list","data","ellip","a","rf","find","toLowerCase","ell","prime_mer","angunit","twin_ax","Prime","_get_geo_proj4","isPro","str_proj","geogcs","params","map","join","proj_param_list","False_Easting","False_Northing","Central_Meridian","Latitude_Of_Origin","Latitude_Of_Center","Standard_Parallel_1","Standard_Parallel_2","Latitude_Of_1st_Point","Latitude_Of_2nd_Point","Longitude_Of_1st_Point","Longitude_Of_2nd_Point","Scale_Factor","Azimuth","Longitude_Of_Center","param","param_name","param_value","_get_proj_param","obj","proj_aliases_list","Aitoff","Albers","Azimuthal_Equidistant","Bonne","Cassini","Chamberlin_Trimetric","Craster_Parabolic","Cylindrical_Equal_Area","Eckert_I","Eckert_II","Eckert_III","Eckert_IV","Eckert_V","Eckert_VI","Equidistant_Conic","Equidistant_Cylindrical","Plate_Carree","Gall_Stereographic","Gauss_Kruger","Gnomonic","Goode_Homolosine","Hammer_Aitoff","Hotine_Oblique_Mercator_Azimuth_Center","Krovak","Lambert_Azimuthal_Equal_Area","Lambert_Conformal_Conic","Loximuthal","Mercator","Miller_Cylindrical","Mollweide","New_Zealand_Map_Grid","Orthographic","Perspectice","Polyconic","Quartic_Authalic","Robinson","Sinusoidal","Stereographic","Stereographic_South_Pole","Double_Stereographic","Transverse_Mercator","Two_Point_Equidistant","Universal_Polar_Stereographic","Universal_Transverse_Mercator","Van_der_Grinten_I","Winkel_I","Winkel_II","Winkel_Tripel","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Mercator_Auxiliary_Sphere","Stereographic_North_Pole","Transverse_Mercator_Complex","proj_name","_get_proj_name","unit_name","unit_list","Kilometer","Meter","Decimeter","Centimeter","Millimeter","Foot_US","Foot_Gold_Coast","Degree","_get_unit","prime_list","prime","prime_name","prime_value","str","bracket_to_json","wkt","index","bracket_list","key","char","result"],"mappings":";;;;;0OAuDA,MAAMA,EACFC,YAAYC,GACRC,KAAKD,SAASA,EACdC,KAAKC,MACR,CACDC,WAAWC,GACP,IAAIC,EAAOC,OAAOD,OAAOD,GAAO,GAChC,OAAO,IAAIG,EAAOF,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAChD,CACDG,SAASJ,GACL,IAAIC,EAAOC,OAAOD,OAAOD,GAAO,GAC3BK,EAASJ,EAAO,GACjBK,EAAW,GACXC,EAAMV,KAAKE,WAAWE,EAAO,IAC7BO,EAAK,GACLC,EAAK,GACT,IAAK,IAAIC,EAAE,EAAEA,EAAET,EAAOU,OAAOD,IACzB,GAAIT,EAAOS,aAAeR,OAAO,CAE7B,OADQA,OAAOU,KAAKX,EAAOS,IAAI,GAAGG,eAE9B,IAtBG,YAuBCP,EAAWQ,KAAK,IAAIC,EAAcd,EAAOS,KACzC,MACJ,IA3BF,OA4BMF,EAAK,IAAIQ,EAAKf,EAAOS,IACrB,MACJ,IA7BG,aA8BCD,EAAK,IAAIQ,EAAWhB,EAAOS,IAItC,CAEL,OAAO,IAAIQ,EAAOb,EAASE,EAAME,EAAKH,EAAWE,EACpD,CACDV,OACID,KAAKsB,KAAKjB,OAAOU,KAAKf,KAAKD,UAAU,GAAGiB,cA7C7B,WA8CPX,OAAOU,KAAKf,KAAKD,UAAU,GAAGiB,cAC9BhB,KAAKuB,GAAGvB,KAAKO,SAASP,KAAKD,UAE3BC,KAAKuB,GAAGvB,KAAKE,WAAWF,KAAKD,SAGpC,CACDyB,WACI,OAAOxB,KAAKuB,GAAGC,WAAW,qBAC7B,EAEL,MAAMC,EACFC,WAAW,CACP,CACIC,MAAO,QACPC,QAAS,WACTC,SAAW,eAEnB/B,YAAYgC,GACR,IAAI1B,EAAOC,OAAOD,OAAO0B,GAAO,GAChC9B,KAAK+B,KAAK3B,EAAO,GACjBJ,KAAKgC,UAAU,IAAIC,EAAW7B,EAAO,GACxC,CACDoB,WAGI,OAAOxB,KAAKgC,UAAUR,UACzB,EAYL,MAAMS,EACFC,gBAAgB,CACZ,CACIH,KAAK,QACLI,KAAK,CAAC,QAAU,gBAEpB,CACIJ,KAAK,OACLI,KAAK,CAAC,YAAY,aAEtB,CACIJ,KAAK,SACLI,KAAK,CAAC,YAAY,cAEtB,CACIJ,KAAK,SACLI,KAAK,CAAC,UAAU,YAEpB,CACIJ,KAAK,OACLI,KAAK,CAAC,QAAU,MAEpB,CACIJ,KAAK,QACLI,KAAK,CAAC,QAAU,QAEpB,CACIJ,KAAK,QACLI,KAAK,CAAC,QAAU,SAEpB,CACIJ,KAAK,QACLI,KAAK,CAAC,QAAU,SAEpB,CACIJ,KAAK,QACLI,KAAK,CAAC,QAAU,gBAEpB,CACIJ,KAAK,SACLI,KAAK,CAAC,QAAU,WAGxBrC,YAAYsC,GACR,IAAIhC,EAAOC,OAAOD,OAAOgC,GAAO,GAChCpC,KAAK+B,KAAK3B,EAAO,GACjBJ,KAAKqC,EAAEjC,EAAO,GACdJ,KAAKsC,GAAGlC,EAAO,EAClB,CACDoB,WACI,GAAGxB,KAAKkC,gBAAgBK,MAAKpC,GAASA,EAAM4B,KAAKS,gBAAgBxC,KAAK+B,KAAKS,gBACvE,MAAQ,WAAWxC,KAAK+B,KAE5B,IAAIU,EAAIzC,KAAKkC,gBAAgBK,MAAKpC,GAAUA,EAAMgC,KAAK,IAAInC,KAAKqC,GAAMlC,EAAMgC,KAAK,IAAInC,KAAKsC,KAC1F,OAAIG,EACO,WAAWA,EAAIV,KAEd,OAAO/B,KAAKqC,EAAE,OAAOrC,KAAKsC,EAEzC,EAEL,MAAMhC,EACFR,YAAYiC,EAAMD,EAAOY,EAAWC,EAASC,EAAQ,MACjD5C,KAAK+B,KAAKA,EACV/B,KAAK8B,MAAM,IAAIL,EAAMK,GACrB9B,KAAK0C,UAAU,IAAIG,EAAMH,GACzB1C,KAAK2C,QAAQA,EACb3C,KAAK4C,QAAQA,CAChB,CACDE,iBACI,OAAO9C,KAAK8B,MAAMN,WAAWxB,KAAK0C,UAAUlB,UAC/C,CACDA,SAASuB,GAAM,GACX,IAAIC,EAAShD,KAAK8C,iBAClB,OAAIC,EACOC,EAEC,iBAAiBA,CAGhC,EAEL,MAAM3B,EACFvB,YAAYiC,EAAKkB,EAAOrC,EAAKsC,EAAOvC,GAChCX,KAAK+B,KAAKA,EACV/B,KAAKiD,OAAOA,EACZjD,KAAKY,KAAKA,EACVZ,KAAKkD,OAAOA,EACZlD,KAAKW,KAAKA,CACb,CACDa,WACI,IAAI0B,EAAOlD,KAAKkD,OAAOC,KAAIhD,GAChBA,EAAMqB,aACd4B,KAAK,KACR,MAAO,UAAUpD,KAAKY,KAAKY,WAAWxB,KAAKiD,OAAOzB,UAAS,GAAM0B,EAAOlD,KAAKW,KAAKa,UACrF,EAEL,MAAMN,EACFmC,gBAAgB,CACZ,CAAEC,cAA0B,OAC5B,CAAEC,eAA0B,OAC5B,CAAEC,iBAA0B,SAC5B,CAAEC,mBAA0B,SAC5B,CAAEC,mBAA0B,SAC5B,CAAEC,oBAA0B,UAC5B,CAAEC,oBAA0B,SAC5B,CAAEC,sBAA0B,SAC5B,CAAEC,sBAA0B,SAC5B,CAAEC,uBAA2B,SAC7B,CAAEC,uBAA2B,SAC7B,CAAEC,aAA2B,KAC7B,CAAEC,QAA2B,SAC7B,CAAEC,oBAA2B,SAEjCrE,YAAYsE,GACR,IAAIhE,EAAOC,OAAOD,OAAOgE,GAAO,GAChCpE,KAAKqE,WAAWjE,EAAO,GACvBJ,KAAKsE,YAAYlE,EAAO,EAC3B,CACDmE,kBACI,IAAK,IAAI1D,EAAI,EAAGA,EAAIb,KAAKqD,gBAAgBvC,OAAQD,IAAK,CAClD,IAAI2D,EAAIxE,KAAKqD,gBAAgBxC,GAC7B,GAAIR,OAAOU,KAAKyD,GAAK,GAAGhC,gBAAgBxC,KAAKqE,WAAW7B,cACpD,OAAOgC,EAAInE,OAAOU,KAAKyD,GAAK,GAEnC,CACD,MAAQ,EACX,CACDhD,WAEI,MAAO,KADQxB,KAAKuE,kBACG,IAAIvE,KAAKsE,WACnC,EAEL,MAAMlD,EACFqD,kBAAkB,CACd,CAACC,OAAuC,UACxC,CAACC,OAAuC,OACxC,CAACC,sBAAuC,QACxC,CAACC,MAAuC,SACxC,CAACC,QAAuC,QACxC,CAACC,qBAAuC,SACxC,CAACC,kBAAuC,SACxC,CAACC,uBAAuC,OACxC,CAACC,SAAuC,QACxC,CAACC,UAAuC,QACxC,CAACC,WAAuC,QACxC,CAACC,UAAuC,QACxC,CAACC,SAAuC,QACxC,CAACC,UAAuC,QACxC,CAACC,kBAAuC,QACxC,CAACC,wBAAuC,OACxC,CAACC,aAAuC,OACxC,CAACC,mBAAuC,QACxC,CAACC,aAAuC,SACxC,CAACC,SAAuC,QACxC,CAACC,iBAAuC,SACxC,CAACC,cAAuC,UACxC,CAACC,uCAA0C,QAC3C,CAACC,OAAuC,UACxC,CAACC,6BAAuC,QACxC,CAACC,wBAAuC,OACxC,CAACC,WAAuC,SACxC,CAACC,SAAuC,QACxC,CAACC,mBAAuC,QACxC,CAACC,UAAuC,QACxC,CAACC,qBAAuC,QACxC,CAACC,aAAuC,SACxC,CAACC,YAAuC,UACxC,CAACC,UAAuC,QACxC,CAACC,iBAAuC,WACxC,CAACC,SAAuC,SACxC,CAACC,WAAuC,QACxC,CAACC,cAAuC,SACxC,CAACC,yBAAuC,SACxC,CAACC,qBAAuC,UACxC,CAACC,oBAAuC,SACxC,CAACC,sBAAuC,SACxC,CAACC,8BAAuC,OACxC,CAACC,8BAAuC,OACxC,CAACC,kBAAuC,SACxC,CAACC,SAAuC,SACxC,CAACC,UAAuC,SACxC,CAACC,cAAuC,UACxC,CAACC,+CAAmD,QACpD,CAACC,iDAAoD,SACrD,CAACC,0BAAuC,QACxC,CAACC,yBAAuC,SACxC,CAACC,4BAAuC,UAE5ChI,YAAYc,GACRZ,KAAK+H,UAAU1H,OAAOD,OAAOQ,GAAM,GAAG,EACzC,CACDoH,iBACI,IAAK,IAAInH,EAAI,EAAGA,EAAIb,KAAKyE,kBAAkB3D,OAAQD,IAAK,CACpD,IAAI2D,EAAIxE,KAAKyE,kBAAkB5D,GAC/B,GAAIR,OAAOU,KAAKyD,GAAK,GAAGhC,gBAAgBxC,KAAK+H,UAAUvF,cACnD,OAAOgC,EAAInE,OAAOU,KAAKyD,GAAK,GAEnC,CACD,MAAQ,EACX,CACDhD,WACI,OAAOxB,KAAKgI,gBACf,EAEL,MAAM7G,EACFrB,YAAYa,GACRX,KAAKiI,UAAU5H,OAAOD,OAAOO,GAAM,GAAG,EAEzC,CACDuH,UAAU,CACN,CAAEC,UAAmB,MACrB,CAAEC,MAAmB,KACrB,CAAEC,UAAmB,MACrB,CAAEC,WAAmB,MACrB,CAAEC,WAAmB,MACrB,CAAEC,QAAmB,SACrB,CAAEC,gBAAmB,SACrB,CAAEC,OAAmB,KAEzBC,YACI,IAAK,IAAI9H,EAAI,EAAGA,EAAIb,KAAKkI,UAAUpH,OAAQD,IAAK,CAC5C,IAAI2D,EAAIxE,KAAKkI,UAAUrH,GACvB,GAAIR,OAAOU,KAAKyD,GAAK,GAAGhC,gBAAgBxC,KAAKiI,UAAUzF,cACnD,OAAOgC,EAAInE,OAAOU,KAAKyD,GAAK,GAEnC,CACD,MAAO,SACV,CACDhD,WAEI,MAAO,WADQxB,KAAK2I,WAEvB,EAEL,MAAM9F,EACF+F,WAAW,CAAC,YAAa,SAAU,QAAS,SAAU,SAAS,OAAO,OAAO,UAAU,QAAQ,WAAW,YAAY,SAAS,QAC/H9I,YAAY+I,GACR,IAAIzI,EAAOC,OAAOD,OAAOyI,GAAO,GAChC7I,KAAK8I,WAAW1I,EAAO,GACvBJ,KAAK+I,YAAY3I,EAAO,EAC3B,CACDoB,WACI,IAAKwH,EAAI,QAMT,OALIhJ,KAAK4I,WAAWrG,MAAKpC,GAASA,EAAMqC,gBAAgBxC,KAAK8I,WAAWtG,gBACpEwG,GAAKhJ,KAAK8I,WAEVE,GAAKhJ,KAAK+I,YAEPC,CACV,EA0BL,SAASC,EAAgBC,EAAIC,EAAM,GAC/B,IAAIC,EAAa,GACZC,EAAI,GACT,IAAK,IAAIxI,EAAIsI,EAAOtI,EAAIqI,EAAIpI,OAAQD,IAAK,CACrC,IAAIyI,EAAKJ,EAAIrI,GACb,GAAU,KAANyI,EAAU,CACV,IAAI9E,EAAI,CAAA,EACJ+E,EAAON,EAAgBC,EAAIrI,EAAE,GACjC2D,EAAI6E,GAAKE,EAAO,GAChBH,EAAanI,KAAKuD,GAClB3D,EAAI0I,EAAO,GACXF,EAAI,EAChB,MAAc,GAAY,KAARC,EACFD,IACAD,EAAanI,KAAKoI,GAClBA,EAAM,QAER,IAAY,KAARC,EAIN,OAHID,GACAD,EAAanI,KAAKoI,GAEf,CAACD,EAAavI,GAEX,KAANyI,GAAqB,KAANA,GAAoB,KAANA,GAAmB,MAANA,IAC1CD,GAAKC,EAEZ,CACJ,CACD,OAAQF,EAAa,EACzB,QAIA,SAAmBJ,GACf,IAAIjJ,EAASkJ,EAvbT,gNAybJ,OADO,IAAIpJ,EAAGE,GACJyB,UACd"}